<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Get a Quote - Clearview Window Cleaning</title>
  <link rel="stylesheet" href="./style.css">
  <link rel="icon" href="./favicon.ico" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
  <script src="https://kit.fontawesome.com/3f34c302de.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
      <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


</head>

<body>
  <main>

    <div class="backgroundImg">
      <img src="./assets/main.jpg" style='height: 100vh;width:100%;object-fit: cover;margin:0;padding:0;' alt="" />
    </div>
    <div id="mshadow">

    </div>
    <div id="menu">
      <img src="./assets/menubackground.jpg"
        style="position: relative;width: 100%;height:100%;opacity:0.5;border-radius: 20px;z-index:250" />
      <div style="height:100vh;width:80%;margin:0;padding:0;z-index:255;opacity:1;position:absolute;top:0;left:0">
        <i class="fa-solid fa-xmark" id="mx"></i>
        <div id="menulinks">
          <p class="linkau">Our Mission</p>
          <p class="linkgq">Get a Quote</p>
          <p class="linkcu">Contact Us</p>
          <p class="linkop">Our Process</p>
        </div>


      </div>
    </div>
    <div class="navBar">
      <div id="nav-icon">
        <img src="./assets/icon.jpg" style="width:5vh;height:5vh;margin:0;padding:0;border-radius:50%">
      </div>
      <div id="nav-links">
        <p class="linkau">Our Mission</p>
        <p class="linkgq">Get a Quote</p>
        <p class="linkcu">Contact Us</p>
        <p class="linkop">Our Process</p>

      </div>
      <i class="fa-solid fa-bars" id="mbar"></i>


    </div>
    <div id="head-content" style="height:150vh;">
      <div id="head-div" class="headquote">
        <h1 style="margin:0;font-size:65px">Request a Quote</h1>
        <p style="margin:0;font-size:25px;color:rgb(77, 77, 77);font-weight: 300;">Recieve a personalized quote for our
          service tailored to your requirements.</p>
      </div>
      <div id="qform" style="margin-top:35px;">
        <p>Name</p>
        <div class="sect">
          <input type="text" id="qformfn" placeholder="First Name*" />
          <input type="text" id="qformln" placeholder="Last Name*" />

        </div>
        <p>Email</p>
        <div class="sect">
          <input style="width:100%" type="text" id="qformem" placeholder="Email Address*" />

        </div>
        <p>Phone</p>

        <div class="sect">
          <input style="width:100%" type="text" id="qformpn" placeholder="Phone Number*" />

        </div>
        <p>Address</p>
        <div class="sect" style="margin-bottom:5px;">
          <input style="width:100%" type="text" id="qforma1" placeholder="Address Line 1*" />

        </div>
        <div class="sect" style="margin-bottom:5px;">
          <input style="width:100%" type="text" id="qforma2" placeholder="Address Line 2" />

        </div>
        <div class="sect">
          <input type="text" id="qformc" style="margin-right:5px" placeholder="City*" />
          <input type="text" id="qformzc" placeholder="Zip Code*" />

        </div>
        <p>Additional Information</p>

        <div class="sect" style="margin-bottom:2px;">
          <textarea style="width:100%;height:10vh;" type="text" id="qformai"
            placeholder="Additional Information / Comments"></textarea>

        </div>
        <p style="margin-top:2px;margin-bottom:6px;font-size:14px !important;font-weight:400">Fields with an asterisk
          (*) are required</p>

        <button class="primary" id="submitForm" style="font-size:14px; width: 100px;">Submit</button>


      </div>
    </div>
    <div id="main-content">

    </div>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
      import { getFirestore, collection, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";
      const firebaseConfig = {
        apiKey: "AIzaSyBPAvqzPbdldLzK4m2OCYdFmTC9Gk13-Cg",
        authDomain: "clearviewwindow-882f0.firebaseapp.com",
        projectId: "clearviewwindow-882f0",
        storageBucket: "clearviewwindow-882f0.firebasestorage.app",
        messagingSenderId: "1040592919482",
        appId: "1:1040592919482:web:ddbdf5bacd0494de71db83"
      };
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      var rand = function () {
        return Math.random().toString(36).substr(2); 
      };

      var token = function () {
        return rand() + rand(); 
      };
      //Thanks to https://stackoverflow.com/a/8532436/15317733, i totally didn't get lazy again

      $("#submitForm").click(async function () {
        //Check required fields
        const requiredFields = ["qformfn", "qformln", "qformem", "qformpn", "qforma1", "qformc", "qformzc"];
        for (var item of requiredFields) {
          if (String($("#" + item).val()).length < 1) {
            swal({
              title: "Please fill out all required fields.",
              icon: "warning",
            })
            return false;
          }
        }
        await setDoc(doc(db, "quotereqs", token()), {
          firstname: $("#qformfn").val(),
          lastname: $("#qformln").val(),
          emailaddress: $("#qformem").val(),
          phonenumber: $("#qformpn").val(),
          addressline1: $("#qforma1").val(),
          addressline2: $("#qforma2").val(),
          city: $("#qformc").val(),
          zipcode: $("#qformzc").val(),
          addinfo: $("#qformai").val(),
          timestamp: String(Date.now())
        });

        alert("Your quote request has been submitted successfully.");
        for (var item of requiredFields) {
          $("#" + item).val(" ");
        }
        $("#qforma2").val("");
        $("#qformai").val("");

      })
    </script>
    <script src="index.js"></script>


  </main>
</body>

</html>